{"ast":null,"code":"var _jsxFileName = \"/home/marc/eattheblocks-master/screencast/379-nft-royalties/connectButton/src/App.js\",\n    _s2 = $RefreshSig$();\n\nimport logo from \"./logo.svg\";\nimport './App.css';\nimport { BrowserRouter as Router, Switch, Route } from \"react-router-dom\";\nimport detectEthereumProvider from '@metamask/detect-provider';\nimport { useEffect, useState } from 'react';\nimport { Navbar, Container, Row, Col, Button, Alert, Nav, NavDropdown } from 'react-bootstrap';\nimport Chain from './components/chain'; // import SignIn from './components/signin'\n\nimport Home from './pages/index';\nimport AboutUs from './pages/about';\nimport ContactUs from './pages/contactus';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nimport { Fragment as _Fragment } from \"react/jsx-dev-runtime\";\n\nfunction App() {\n  _s2();\n\n  var _s = $RefreshSig$();\n\n  const [currentAccount, setCurrentAccount] = useState('');\n  const [isLogged, setIsLogged] = useState(false);\n  const [currentChainID, setCurrentChainID] = useState(-1); // useEffect(() => {\n  //   const init = async () => {\n  //     try {\n  //       const { message,provider,address } = await SignIn();\n  //     } catch(e) {\n  //       console.log(e);\n  //       setMessage({\n  //         payload: `Ooops... There was a problem when loading the app: ${e}`,\n  //         type: 'danger'\n  //       });\n  //     }\n  //   };\n  //   init();\n  // }, []);\n\n  const SignIn = async () => {\n    //Detect Provider\n    const provider = await detectEthereumProvider(); //const web3 = new Web3(provider)\n\n    if (!provider) {\n      setMessage(messages => [...messages, {\n        head: \"Wallet not found\",\n        body: `Please install MetaMask!`,\n        variant: 'warning'\n      }]);\n    } else {\n      const address = await ConnectWallet();\n      if (address) setMessage(messages => [...messages, {\n        head: \"User Login\",\n        body: `addres: ${address}`,\n        variant: 'success'\n      }]);\n    }\n  };\n\n  const ConnectWallet = async () => {\n    console.log(\"Try Connect\");\n\n    try {\n      await window.ethereum.enable();\n      const id = await window.ethereum.request({\n        method: 'eth_chainId'\n      });\n      setCurrentChainID(() => parseInt(id, 16));\n      const accounts = await window.ethereum.request({\n        method: 'eth_requestAccounts'\n      });\n      setIsLogged(true);\n      setCurrentAccount(accounts[0]);\n      return accounts[0];\n    } catch (err) {\n      if (err.code === 4001) {\n        // EIP-1193 userRejectedRequest error\n        // If this happens, the user rejected the connection request.\n        console.log('Please connect to MetaMask.');\n        setMessage(messages => [...messages, {\n          head: \"User Rejected Request\",\n          body: 'Please connect to MetaMask.',\n          variant: 'info'\n        }]);\n      } else if (err.code === -32002) {\n        console.log('Please unlock MetaMask.');\n        setMessage(messages => [...messages, {\n          head: \"User Request Pending\",\n          body: 'Please unlock MetaMask and try agin.',\n          variant: 'info'\n        }]);\n      } else {\n        console.error(err);\n        setMessage(messages => [...messages, {\n          head: \"Error\",\n          body: err.message,\n          variant: 'info'\n        }]);\n      }\n    }\n  };\n\n  useEffect(() => {\n    window.onbeforeunload = function () {\n      return \"Prevent reload\";\n    };\n\n    window.ethereum.on('accountsChanged', function (accounts, currentAccount, messages) {\n      if (accounts.length === 0) {\n        // MetaMask is locked or the user has not connected any accounts\n        setMessage(messages => [...messages, {\n          head: \"User Rejected Request\",\n          body: 'Please connect to MetaMask.',\n          variant: 'info'\n        }]);\n      } else if (accounts[0] !== currentAccount) {\n        console.log(accounts[0]);\n        console.log(messages);\n        setCurrentAccount(() => accounts[0]);\n        setMessage(messages => [...messages, {\n          head: \"Account Changed\",\n          body: `addres: ${accounts[0]}`,\n          variant: 'warning'\n        }]);\n      }\n    });\n    window.ethereum.on('chainChanged', _chainId => {\n      console.log(_chainId);\n      setCurrentChainID(() => parseInt(_chainId, 16)); //window.location.reload()\n    });\n  }, []);\n\n  const SignOut = async () => {\n    setIsLogged(false);\n    setCurrentAccount('');\n  };\n\n  const shortAddr = () => {\n    return `${currentAccount.substr(0, 4)}...${currentAccount.substring(currentAccount.length - 4, currentAccount.length)}`;\n  };\n\n  const [messages, setMessage] = useState([]);\n\n  const Message = props => {\n    _s();\n\n    const [show, setShow] = useState(true);\n\n    const close = () => {\n      setShow(false);\n      setMessage(messages.filter((item, index) => index !== props.id));\n    };\n\n    if (show) {\n      return /*#__PURE__*/_jsxDEV(Alert, {\n        variant: props.variant ? props.variant : 'dark',\n        onClose: close,\n        dismissible: true,\n        children: [/*#__PURE__*/_jsxDEV(Alert.Heading, {\n          children: props.head\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 141,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n          children: props.body\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 142,\n          columnNumber: 11\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 140,\n        columnNumber: 9\n      }, this);\n    } else {\n      return /*#__PURE__*/_jsxDEV(_Fragment, {}, void 0, false);\n    }\n  };\n\n  _s(Message, \"vfh/DqFDMxhJHyczn42K3OB7AlU=\");\n\n  return /*#__PURE__*/_jsxDEV(_Fragment, {\n    children: [/*#__PURE__*/_jsxDEV(\"div\", {\n      children: /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"row\",\n        children: /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"col-md-12\",\n          children: /*#__PURE__*/_jsxDEV(Router, {\n            children: [/*#__PURE__*/_jsxDEV(Navbar, {\n              bg: \"dark\",\n              variant: \"dark\",\n              expand: \"lg\",\n              sticky: \"top\",\n              children: [/*#__PURE__*/_jsxDEV(Navbar.Brand, {\n                href: \"#home\",\n                children: \"React Bootstrap Navbar\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 164,\n                columnNumber: 33\n              }, this), /*#__PURE__*/_jsxDEV(Navbar.Toggle, {\n                \"aria-controls\": \"basic-navbar-nav\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 165,\n                columnNumber: 33\n              }, this), /*#__PURE__*/_jsxDEV(Navbar.Collapse, {\n                id: \"basic-navbar-nav\",\n                children: /*#__PURE__*/_jsxDEV(Nav, {\n                  className: \"mr-auto\",\n                  children: [/*#__PURE__*/_jsxDEV(Nav.Link, {\n                    href: \"/\",\n                    children: \"Home\"\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 168,\n                    columnNumber: 37\n                  }, this), /*#__PURE__*/_jsxDEV(Nav.Link, {\n                    href: \"/about-us\",\n                    children: \"Contact Us\"\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 169,\n                    columnNumber: 37\n                  }, this), /*#__PURE__*/_jsxDEV(Nav.Link, {\n                    href: \"/contact-us\",\n                    children: \"About Us\"\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 170,\n                    columnNumber: 37\n                  }, this), /*#__PURE__*/_jsxDEV(NavDropdown, {\n                    title: \"Dropdown\",\n                    id: \"basic-nav-dropdown\",\n                    children: [/*#__PURE__*/_jsxDEV(NavDropdown.Item, {\n                      href: \"#action/3.1\",\n                      children: \"Action\"\n                    }, void 0, false, {\n                      fileName: _jsxFileName,\n                      lineNumber: 172,\n                      columnNumber: 41\n                    }, this), /*#__PURE__*/_jsxDEV(NavDropdown.Item, {\n                      href: \"#action/3.2\",\n                      children: \"Another action\"\n                    }, void 0, false, {\n                      fileName: _jsxFileName,\n                      lineNumber: 173,\n                      columnNumber: 41\n                    }, this), /*#__PURE__*/_jsxDEV(NavDropdown.Item, {\n                      href: \"#action/3.3\",\n                      children: \"Something\"\n                    }, void 0, false, {\n                      fileName: _jsxFileName,\n                      lineNumber: 174,\n                      columnNumber: 41\n                    }, this), /*#__PURE__*/_jsxDEV(NavDropdown.Divider, {}, void 0, false, {\n                      fileName: _jsxFileName,\n                      lineNumber: 175,\n                      columnNumber: 41\n                    }, this), /*#__PURE__*/_jsxDEV(NavDropdown.Item, {\n                      href: \"#action/3.4\",\n                      children: \"Separated link\"\n                    }, void 0, false, {\n                      fileName: _jsxFileName,\n                      lineNumber: 176,\n                      columnNumber: 41\n                    }, this)]\n                  }, void 0, true, {\n                    fileName: _jsxFileName,\n                    lineNumber: 171,\n                    columnNumber: 37\n                  }, this)]\n                }, void 0, true, {\n                  fileName: _jsxFileName,\n                  lineNumber: 167,\n                  columnNumber: 37\n                }, this)\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 166,\n                columnNumber: 33\n              }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n                children: [/*#__PURE__*/_jsxDEV(Chain, {\n                  chainId: currentChainID\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 181,\n                  columnNumber: 35\n                }, this), ' ', /*#__PURE__*/_jsxDEV(Button, {\n                  className: \"connect-button\",\n                  disabled: isLogged,\n                  onClick: SignIn,\n                  variant: \"primary\",\n                  children: isLogged ? shortAddr() : \"Connect\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 182,\n                  columnNumber: 35\n                }, this), ' ', /*#__PURE__*/_jsxDEV(Button, {\n                  onClick: SignOut,\n                  style: {\n                    visibility: isLogged ? \"visible\" : \"hidden\"\n                  },\n                  variant: \"danger\",\n                  children: \"X\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 183,\n                  columnNumber: 35\n                }, this)]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 180,\n                columnNumber: 33\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 163,\n              columnNumber: 29\n            }, this), /*#__PURE__*/_jsxDEV(\"br\", {}, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 186,\n              columnNumber: 29\n            }, this), /*#__PURE__*/_jsxDEV(Switch, {\n              children: [/*#__PURE__*/_jsxDEV(Route, {\n                exact: true,\n                path: \"/\",\n                children: /*#__PURE__*/_jsxDEV(Home, {}, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 189,\n                  columnNumber: 37\n                }, this)\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 188,\n                columnNumber: 33\n              }, this), /*#__PURE__*/_jsxDEV(Route, {\n                path: \"/about-us\",\n                children: /*#__PURE__*/_jsxDEV(AboutUs, {}, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 192,\n                  columnNumber: 37\n                }, this)\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 191,\n                columnNumber: 33\n              }, this), /*#__PURE__*/_jsxDEV(Route, {\n                path: \"/contact-us\",\n                children: /*#__PURE__*/_jsxDEV(ContactUs, {}, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 195,\n                  columnNumber: 37\n                }, this)\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 194,\n                columnNumber: 33\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 187,\n              columnNumber: 29\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 162,\n            columnNumber: 25\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 161,\n          columnNumber: 21\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 160,\n        columnNumber: 17\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 159,\n      columnNumber: 1\n    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"message-list\",\n      children: messages.map((item, i) => /*#__PURE__*/_jsxDEV(Message, {\n        head: item.head,\n        body: item.body,\n        variant: item.variant,\n        id: i\n      }, i, false, {\n        fileName: _jsxFileName,\n        lineNumber: 208,\n        columnNumber: 13\n      }, this))\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 205,\n      columnNumber: 5\n    }, this), /*#__PURE__*/_jsxDEV(Container, {\n      children: /*#__PURE__*/_jsxDEV(Row, {\n        children: /*#__PURE__*/_jsxDEV(Col, {}, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 215,\n          columnNumber: 9\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 214,\n        columnNumber: 7\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 213,\n      columnNumber: 5\n    }, this)]\n  }, void 0, true);\n}\n\n_s2(App, \"hXS0oiLc2EOT/9Ur4R5+GYilVaM=\");\n\n_c = App;\nexport default App;\n\nvar _c;\n\n$RefreshReg$(_c, \"App\");","map":{"version":3,"sources":["/home/marc/eattheblocks-master/screencast/379-nft-royalties/connectButton/src/App.js"],"names":["BrowserRouter","Router","Switch","Route","detectEthereumProvider","useEffect","useState","Navbar","Container","Row","Col","Button","Alert","Nav","NavDropdown","Chain","Home","AboutUs","ContactUs","App","currentAccount","setCurrentAccount","isLogged","setIsLogged","currentChainID","setCurrentChainID","SignIn","provider","setMessage","messages","head","body","variant","address","ConnectWallet","console","log","window","ethereum","enable","id","request","method","parseInt","accounts","err","code","error","message","onbeforeunload","on","length","_chainId","SignOut","shortAddr","substr","substring","Message","props","show","setShow","close","filter","item","index","visibility","map","i"],"mappings":"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","sourcesContent":["import logo from './logo.svg'\nimport './App.css'\nimport {\n  BrowserRouter as Router,\n  Switch,\n  Route,\n} from \"react-router-dom\";\nimport detectEthereumProvider from '@metamask/detect-provider';\nimport { useEffect, useState } from 'react'\nimport { Navbar,Container,Row,Col,Button,Alert,Nav,NavDropdown   } from 'react-bootstrap'\nimport Chain from './components/chain'\n// import SignIn from './components/signin'\nimport Home from './pages/index';\nimport AboutUs from './pages/about';\nimport ContactUs from './pages/contactus';\n\n\nfunction App() {\n\n  const [currentAccount, setCurrentAccount] = useState('');\n  const [isLogged, setIsLogged] = useState(false);\n  const [currentChainID, setCurrentChainID] = useState(-1);\n\n  // useEffect(() => {\n  //   const init = async () => {\n  //     try {\n  //       const { message,provider,address } = await SignIn();\n  //     } catch(e) {\n  //       console.log(e);\n       \n  //       setMessage({\n  //         payload: `Ooops... There was a problem when loading the app: ${e}`,\n  //         type: 'danger'\n  //       });\n  //     }\n  //   };\n  //   init();\n  // }, []);\n\n  const SignIn = async () => {\n      //Detect Provider\n      const provider = await detectEthereumProvider()\n      //const web3 = new Web3(provider)\n\n      if(!provider) {\n\n        setMessage(messages => [...messages, {head : \"Wallet not found\", body: `Please install MetaMask!`, variant: 'warning'}])\n\n      } else {\n\n        const address = await ConnectWallet()\n        if (address)\n          setMessage(messages =>[...messages, {head : \"User Login\", body: `addres: ${address}`, variant: 'success'}])\n\n      }\n      \n  }\n\n  const ConnectWallet = async () => {\n\n    console.log(\"Try Connect\");\n\n    try {\n      await window.ethereum.enable();\n\n      const id = await window.ethereum.request({ method: 'eth_chainId' })\n      setCurrentChainID(() => parseInt(id, 16))\n\n      const accounts = await window.ethereum.request({ method: 'eth_requestAccounts' })\n      setIsLogged(true)\n      setCurrentAccount(accounts[0])\n      return accounts[0]\n\n    } catch(err) {\n        if (err.code === 4001) {\n          // EIP-1193 userRejectedRequest error\n          // If this happens, the user rejected the connection request.\n          console.log('Please connect to MetaMask.')\n          setMessage(messages =>[...messages, {head : \"User Rejected Request\", body: 'Please connect to MetaMask.', variant: 'info'}])\n\n        } else if(err.code === -32002) {\n          console.log('Please unlock MetaMask.')\n          setMessage(messages =>[...messages, {head : \"User Request Pending\", body: 'Please unlock MetaMask and try agin.', variant: 'info'}])\n        } else {\n          console.error(err);\n          setMessage(messages =>[...messages, {head : \"Error\", body: err.message, variant: 'info'}])\n        }\n\n    }\n    \n  }\n\n  useEffect(() => {\n    window.onbeforeunload = function() { return \"Prevent reload\" }\n    window.ethereum.on('accountsChanged', function (accounts,currentAccount,messages) {\n      if (accounts.length === 0) {\n        // MetaMask is locked or the user has not connected any accounts\n        setMessage(messages => [...messages, {head : \"User Rejected Request\", body: 'Please connect to MetaMask.', variant: 'info'}])\n      } else if (accounts[0] !== currentAccount) {\n        console.log(accounts[0])\n        console.log(messages);\n        setCurrentAccount(() => accounts[0])\n        setMessage(messages => [...messages, {head : \"Account Changed\", body: `addres: ${accounts[0]}`, variant: 'warning'}])\n      }\n    });\n\n    window.ethereum.on('chainChanged', (_chainId) => {\n      console.log(_chainId);\n      setCurrentChainID(() => parseInt(_chainId, 16))\n      //window.location.reload()\n    });\n  }, []);\n\n\n\n  const SignOut = async () => {\n    setIsLogged(false)\n    setCurrentAccount('')\n  }\n\n  const shortAddr = () => {\n    return `${currentAccount.substr(0,4)}...${currentAccount.substring(currentAccount.length - 4, currentAccount.length)}`\n  }\n\n\n  \n  const [messages, setMessage] = useState([]);\n  \n  const Message = (props) => {\n\n    const [show, setShow] = useState(true);\n\n    const close = () => {\n      setShow(false)\n      setMessage(messages.filter((item, index) => index !== props.id))\n    }\n\n    if(show) {\n      return (\n        <Alert variant={props.variant ? props.variant : 'dark'} onClose={close} dismissible>\n          <Alert.Heading>{props.head}</Alert.Heading>\n          <p>\n            {props.body}\n          </p>\n        </Alert>\n      )\n    } else {\n      return(<></>)\n    }\n\n    \n  }\n\n  \n  return (\n  <>\n\n\n<div>\n                <div className=\"row\">\n                    <div className=\"col-md-12\">\n                        <Router>\n                            <Navbar bg=\"dark\" variant=\"dark\" expand=\"lg\" sticky=\"top\">\n                                <Navbar.Brand href=\"#home\">React Bootstrap Navbar</Navbar.Brand>\n                                <Navbar.Toggle aria-controls=\"basic-navbar-nav\" />\n                                <Navbar.Collapse id=\"basic-navbar-nav\">\n                                    <Nav className=\"mr-auto\">\n                                    <Nav.Link href=\"/\">Home</Nav.Link>\n                                    <Nav.Link href=\"/about-us\">Contact Us</Nav.Link>\n                                    <Nav.Link href=\"/contact-us\">About Us</Nav.Link>\n                                    <NavDropdown title=\"Dropdown\" id=\"basic-nav-dropdown\">\n                                        <NavDropdown.Item href=\"#action/3.1\">Action</NavDropdown.Item>\n                                        <NavDropdown.Item href=\"#action/3.2\">Another action</NavDropdown.Item>\n                                        <NavDropdown.Item href=\"#action/3.3\">Something</NavDropdown.Item>\n                                        <NavDropdown.Divider />\n                                        <NavDropdown.Item href=\"#action/3.4\">Separated link</NavDropdown.Item>\n                                    </NavDropdown>\n                                    </Nav>\n                                </Navbar.Collapse>\n                                <div>\n                                  <Chain chainId={currentChainID} />{' '}\n                                  <Button className=\"connect-button\" disabled={isLogged} onClick={SignIn} variant=\"primary\">{isLogged ? shortAddr() : \"Connect\"}</Button>{' '}\n                                  <Button onClick={SignOut} style={{visibility: isLogged ? \"visible\" : \"hidden\"}} variant=\"danger\">X</Button>\n                                </div>\n                            </Navbar>\n                            <br />\n                            <Switch>\n                                <Route exact path=\"/\">\n                                    <Home />\n                                </Route>\n                                <Route path=\"/about-us\">\n                                    <AboutUs />\n                                </Route>\n                                <Route path=\"/contact-us\">\n                                    <ContactUs />\n                                </Route>\n                            </Switch>\n                        </Router>\n                    </div>\n                </div>\n            </div>\n\n\n\n    <div className=\"message-list\" >\n        {\n          messages.map((item,i) => (\n            <Message head={item.head} body={item.body} variant={item.variant} id={i} key={i} />\n          ))\n        }\n    </div>\n\n    <Container>\n      <Row>\n        <Col>\n        \n       \n\n        \n        </Col>\n      </Row>\n    </Container>\n  </>\n  );\n}\n\nexport default App;"]},"metadata":{},"sourceType":"module"}
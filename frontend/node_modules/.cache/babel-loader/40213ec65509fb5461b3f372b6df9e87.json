{"ast":null,"code":"var _jsxFileName = \"/home/marc/eattheblocks-master/screencast/379-nft-royalties/connectButton/src/App.js\",\n    _s2 = $RefreshSig$();\n\nimport logo from \"./logo.svg\";\nimport './App.css';\nimport Web3 from 'web3';\nimport detectEthereumProvider from '@metamask/detect-provider';\nimport { useEffect, useState } from 'react';\nimport { Navbar, Container, Row, Col, Button, Alert } from 'react-bootstrap';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nimport { Fragment as _Fragment } from \"react/jsx-dev-runtime\";\n\nfunction App() {\n  _s2();\n\n  var _s = $RefreshSig$();\n\n  useEffect(() => {\n    const init = async () => {\n      const provider = await detectEthereumProvider();\n    };\n\n    init();\n  }, []);\n  const [isLogged, setIsLogged] = useState(false);\n\n  const ConnectWallet = async () => {\n    console.log(\"Try Connect\");\n\n    try {\n      await window.ethereum.enable();\n      const id = await window.ethereum.request({\n        method: 'eth_chainId'\n      });\n      setCurrentChainID(() => parseInt(id, 16));\n      const accounts = await window.ethereum.request({\n        method: 'eth_requestAccounts'\n      });\n      setIsLogged(true);\n      setCurrentAccount(accounts[0]);\n      return accounts[0];\n    } catch (err) {\n      if (err.code === 4001) {\n        // EIP-1193 userRejectedRequest error\n        // If this happens, the user rejected the connection request.\n        console.log('Please connect to MetaMask.');\n        setMessage(messages => [...messages, {\n          head: \"User Rejected Request\",\n          body: 'Please connect to MetaMask.',\n          variant: 'info'\n        }]);\n      } else if (err.code === -32002) {\n        console.log('Please unlock MetaMask.');\n        setMessage(messages => [...messages, {\n          head: \"User Request Pending\",\n          body: 'Please unlock MetaMask and try agin.',\n          variant: 'info'\n        }]);\n      } else {\n        console.error(err);\n        setMessage(messages => [...messages, {\n          head: \"Error\",\n          body: err.message,\n          variant: 'info'\n        }]);\n      }\n    }\n  };\n\n  const Chain = props => {\n    const chainId = props.chainId;\n    let chainLogo;\n    let variant;\n    let chainName;\n\n    switch (chainId) {\n      case 1:\n        //ETH\n        chainLogo = ChainLogo.eth;\n        variant = \"light\";\n        chainName = \"Ethereum Network\";\n        break;\n\n      case 56:\n        //BNB\n        chainLogo = ChainLogo.bnb;\n        variant = \"secondary\";\n        chainName = \"Binance Smart Chain\";\n        break;\n\n      case 128:\n        //HT\n        chainLogo = ChainLogo.ht;\n        variant = \"light\";\n        chainName = \"Heco\";\n        break;\n\n      case 100:\n        //xDai\n        chainLogo = ChainLogo.xdai;\n        variant = \"light\";\n        chainName = \"xDai Stable Chain\";\n        break;\n\n      case 137:\n        //Polygon\n        chainLogo = ChainLogo.polygon;\n        variant = \"light\";\n        chainName = \"Polygon Network\";\n        break;\n\n      default:\n        // Unknown network\n        chainLogo = ChainLogo.unknown;\n        variant = \"light\";\n        chainName = \"Unknown network?\";\n        break;\n    }\n\n    return /*#__PURE__*/_jsxDEV(OverlayTrigger, {\n      placement: \"left\",\n      overlay: /*#__PURE__*/_jsxDEV(Tooltip, {\n        id: `tooltip-left`,\n        children: chainName\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 105,\n        columnNumber: 11\n      }, this),\n      children: /*#__PURE__*/_jsxDEV(Button, {\n        variant: variant,\n        children: /*#__PURE__*/_jsxDEV(\"img\", {\n          class: \"lazyload\",\n          \"data-src\": chainLogo,\n          width: 14,\n          alt: chainName\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 111,\n          columnNumber: 11\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 110,\n        columnNumber: 9\n      }, this)\n    }, \"left\", false, {\n      fileName: _jsxFileName,\n      lineNumber: 101,\n      columnNumber: 7\n    }, this);\n  };\n\n  const SignIn = async () => {\n    //Detect Provider\n    const provider = await detectEthereumProvider();\n    const web3 = new Web3(provider);\n\n    if (!provider) {\n      setMessage(messages => [...messages, {\n        head: \"Wallet not found\",\n        body: `Please install MetaMask!`,\n        variant: 'warning'\n      }]);\n    } else {\n      const address = await ConnectWallet();\n      if (address) setMessage(messages => [...messages, {\n        head: \"User Login\",\n        body: `addres: ${address}`,\n        variant: 'success'\n      }]);\n    }\n  }; // const SignIn = async () => {\n  //   setIsLogged(true)\n  // }\n\n\n  const SignOut = async () => {\n    setIsLogged(false);\n  };\n\n  const [messages, setMessage] = useState([{\n    head: \"User Rejected Request\",\n    body: 'Please connect to MetaMask.',\n    variant: 'info'\n  }, {\n    head: \"User Rejected Request\",\n    body: 'Please connect to MetaMask.',\n    variant: 'info'\n  }]);\n\n  const Message = props => {\n    _s();\n\n    const [show, setShow] = useState(true);\n\n    const close = () => {\n      setShow(false);\n      setMessage(messages.filter((item, index) => index !== props.id));\n    };\n\n    if (show) {\n      return /*#__PURE__*/_jsxDEV(Alert, {\n        variant: props.variant ? props.variant : 'dark',\n        onClose: close,\n        dismissible: true,\n        children: [/*#__PURE__*/_jsxDEV(Alert.Heading, {\n          children: props.head\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 164,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n          children: props.body\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 165,\n          columnNumber: 11\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 163,\n        columnNumber: 9\n      }, this);\n    } else {\n      return /*#__PURE__*/_jsxDEV(_Fragment, {}, void 0, false);\n    }\n  };\n\n  _s(Message, \"vfh/DqFDMxhJHyczn42K3OB7AlU=\");\n\n  return /*#__PURE__*/_jsxDEV(_Fragment, {\n    children: [/*#__PURE__*/_jsxDEV(Navbar, {\n      bg: \"dark\",\n      className: \"justify-content-between\",\n      variant: \"dark\",\n      children: [/*#__PURE__*/_jsxDEV(Navbar.Brand, {\n        href: \"#home\",\n        children: [/*#__PURE__*/_jsxDEV(\"img\", {\n          alt: \"\",\n          src: logo,\n          width: \"30\",\n          height: \"30\",\n          className: \"d-inline-block align-top App-logo\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 181,\n          columnNumber: 7\n        }, this), ' ', \"0x React Bootstrap Tutorial\"]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 180,\n        columnNumber: 5\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        children: [/*#__PURE__*/_jsxDEV(Button, {\n          onClick: SignIn,\n          variant: \"primary\",\n          children: \"Connect\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 192,\n          columnNumber: 7\n        }, this), ' ', /*#__PURE__*/_jsxDEV(Button, {\n          onClick: SignOut,\n          style: {\n            visibility: isLogged ? \"visible\" : \"hidden\"\n          },\n          variant: \"danger\",\n          children: \"X\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 193,\n          columnNumber: 7\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 191,\n        columnNumber: 5\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 179,\n      columnNumber: 3\n    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"message-list\",\n      children: messages.map((item, i) => /*#__PURE__*/_jsxDEV(Message, {\n        head: item.head,\n        body: item.body,\n        variant: item.variant,\n        id: i\n      }, i, false, {\n        fileName: _jsxFileName,\n        lineNumber: 200,\n        columnNumber: 13\n      }, this))\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 197,\n      columnNumber: 5\n    }, this), /*#__PURE__*/_jsxDEV(Container, {\n      children: /*#__PURE__*/_jsxDEV(Row, {\n        children: /*#__PURE__*/_jsxDEV(Col, {\n          children: /*#__PURE__*/_jsxDEV(\"img\", {\n            src: logo,\n            className: \"App-logo\",\n            alt: \"logo\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 209,\n            columnNumber: 9\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 207,\n          columnNumber: 9\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 206,\n        columnNumber: 7\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 205,\n      columnNumber: 5\n    }, this)]\n  }, void 0, true);\n}\n\n_s2(App, \"r6VaJ292TO6To9k8X21SR/YLuc8=\");\n\n_c = App;\nexport default App;\n\nvar _c;\n\n$RefreshReg$(_c, \"App\");","map":{"version":3,"sources":["/home/marc/eattheblocks-master/screencast/379-nft-royalties/connectButton/src/App.js"],"names":["Web3","detectEthereumProvider","useEffect","useState","Navbar","Container","Row","Col","Button","Alert","App","init","provider","isLogged","setIsLogged","ConnectWallet","console","log","window","ethereum","enable","id","request","method","setCurrentChainID","parseInt","accounts","setCurrentAccount","err","code","setMessage","messages","head","body","variant","error","message","Chain","props","chainId","chainLogo","chainName","ChainLogo","eth","bnb","ht","xdai","polygon","unknown","SignIn","web3","address","SignOut","Message","show","setShow","close","filter","item","index","logo","visibility","map","i"],"mappings":"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","sourcesContent":["import logo from './logo.svg'\nimport './App.css'\nimport Web3 from 'web3'\nimport detectEthereumProvider from '@metamask/detect-provider';\nimport { useEffect, useState } from 'react'\nimport { Navbar ,Container,Row,Col,Button,Alert } from 'react-bootstrap'\n\n\n\n\n\nfunction App() {\n\n\n  useEffect(() => {\n    const init = async () => {\n      const provider = await detectEthereumProvider();\n    };\n  init();\n  }, []);\n\n  const [isLogged, setIsLogged] = useState(false);\n  \n  const ConnectWallet = async () => {\n\n    console.log(\"Try Connect\");\n\n    try {\n      await window.ethereum.enable();\n\n      const id = await window.ethereum.request({ method: 'eth_chainId' })\n      setCurrentChainID(() => parseInt(id, 16))\n\n      const accounts = await window.ethereum.request({ method: 'eth_requestAccounts' })\n      setIsLogged(true)\n      setCurrentAccount(accounts[0])\n      return accounts[0]\n\n    } catch(err) {\n        if (err.code === 4001) {\n          // EIP-1193 userRejectedRequest error\n          // If this happens, the user rejected the connection request.\n          console.log('Please connect to MetaMask.')\n          setMessage(messages =>[...messages, {head : \"User Rejected Request\", body: 'Please connect to MetaMask.', variant: 'info'}])\n\n        } else if(err.code === -32002) {\n          console.log('Please unlock MetaMask.')\n          setMessage(messages =>[...messages, {head : \"User Request Pending\", body: 'Please unlock MetaMask and try agin.', variant: 'info'}])\n        } else {\n          console.error(err);\n          setMessage(messages =>[...messages, {head : \"Error\", body: err.message, variant: 'info'}])\n        }\n\n    }\n    \n  }\n\n\n  const Chain = (props) => {\n\n    const chainId = props.chainId\n\n    let chainLogo\n    let variant\n    let chainName\n\n    switch (chainId) {\n      case 1: //ETH\n          chainLogo = ChainLogo.eth\n          variant = \"light\"\n          chainName = \"Ethereum Network\"\n        break;\n      case 56: //BNB\n          chainLogo = ChainLogo.bnb\n          variant = \"secondary\"\n          chainName = \"Binance Smart Chain\"\n        break;\n      case 128: //HT\n          chainLogo = ChainLogo.ht\n          variant = \"light\"\n          chainName = \"Heco\"\n        break;\n      case 100: //xDai\n          chainLogo = ChainLogo.xdai\n          variant = \"light\"  \n          chainName = \"xDai Stable Chain\"\n        break;\n      case 137: //Polygon\n          chainLogo = ChainLogo.polygon\n          variant = \"light\"\n          chainName = \"Polygon Network\"\n        break;\n      default: // Unknown network\n          chainLogo = ChainLogo.unknown\n          variant = \"light\"\n          chainName = \"Unknown network?\"\n        break;\n    }\n\n    return(\n      <OverlayTrigger\n        key=\"left\"\n        placement=\"left\"\n        overlay={\n          <Tooltip id={`tooltip-left`}>\n            {chainName}\n        </Tooltip>\n        }\n      >\n        <Button variant={variant} >\n          <img class=\"lazyload\" data-src={chainLogo} width={14} alt={chainName} />\n        </Button>\n      </OverlayTrigger>\n    )\n  }\n\n  const SignIn = async () => {\n    //Detect Provider\n    const provider = await detectEthereumProvider()\n    const web3 = new Web3(provider)\n\n    if(!provider) {\n\n      setMessage(messages => [...messages, {head : \"Wallet not found\", body: `Please install MetaMask!`, variant: 'warning'}])\n\n    } else {\n\n      const address = await ConnectWallet()\n      if (address)\n        setMessage(messages =>[...messages, {head : \"User Login\", body: `addres: ${address}`, variant: 'success'}])\n\n    }  \n  }\n\n\n  // const SignIn = async () => {\n  //   setIsLogged(true)\n  // }\n\n  const SignOut = async () => {\n    setIsLogged(false)\n  }\n\n\n  \n  const [messages, setMessage] = useState([\n    {head : \"User Rejected Request\", body: 'Please connect to MetaMask.', variant: 'info'},\n    {head : \"User Rejected Request\", body: 'Please connect to MetaMask.', variant: 'info'}\n  ])\n\n\n  const Message = (props) => {\n\n    const [show, setShow] = useState(true);\n\n    const close = () => {\n      setShow(false)\n      setMessage(messages.filter((item, index) => index !== props.id))\n    }\n\n    if(show) {\n      return (\n        <Alert variant={props.variant ? props.variant : 'dark'} onClose={close} dismissible>\n          <Alert.Heading>{props.head}</Alert.Heading>\n          <p>\n            {props.body}\n          </p>\n        </Alert>\n      )\n    } else {\n      return(<></>)\n    }\n\n    \n  }\n  \n  return (\n  <>\n  <Navbar bg=\"dark\" className=\"justify-content-between\" variant=\"dark\">\n    <Navbar.Brand href=\"#home\">\n      <img\n        alt=\"\"\n        src={logo}\n        width=\"30\"\n        height=\"30\"\n        className=\"d-inline-block align-top App-logo\"\n      />{' '}\n      0x React Bootstrap Tutorial\n      \n    </Navbar.Brand>\n    <div>\n      <Button onClick={SignIn} variant=\"primary\">Connect</Button>{' '}\n      <Button onClick={SignOut} style={{visibility: isLogged ? \"visible\" : \"hidden\"}} variant=\"danger\">X</Button>\n    </div>\n  </Navbar>\n\n    <div className=\"message-list\" >\n        {\n          messages.map((item,i) => (\n            <Message head={item.head} body={item.body} variant={item.variant} id={i} key={i} />\n          ))\n        }\n    </div>\n\n    <Container>\n      <Row>\n        <Col>\n        \n        <img src={logo} className=\"App-logo\" alt=\"logo\" />\n\n        \n        </Col>\n      </Row>\n    </Container>\n  </>\n  );\n}\n\nexport default App;\n"]},"metadata":{},"sourceType":"module"}
{"ast":null,"code":"import { ethers, Contract } from \"ethers\";\nimport web3 from \"web3\";\nimport Token from \"../contracts/MockToken.json\";\nimport nftToken from \"../contracts/NFT.json\";\nimport addresses from \"../contracts/addresses.json\";\n\nconst getAmount = async address => {\n  const amountWei = await token.balanceOf(signerAddress);\n  const amount = parseInt(web3.utils.fromWei(web3.utils.toBN(amountWei)));\n  console.log(`amount: ${amount}`);\n};\n\nconst getTokenBlockchain = () => new Promise((resolve, reject) => {\n  window.addEventListener(\"load\", async () => {\n    console.log(`window.ethereum: ${window.ethereum}`);\n\n    if (window.ethereum) {\n      await window.ethereum.enable();\n      const provider = new ethers.providers.Web3Provider(window.ethereum);\n      console.log(`provider: ${provider}`);\n      const signer = provider.getSigner();\n      console.log(`signer:${signer}`);\n      const signerAddress = await signer.getAddress();\n      console.log(`signerAddress:${signerAddress}`);\n      const token = new Contract(Token.address, Token.abi, signer);\n      const nfttoken = new Contract(nftToken.address, nftToken.abi, signer);\n      const amountWei = await token.balanceOf(signerAddress);\n      const amount = parseInt(web3.utils.fromWei(web3.utils.toBN(amountWei)));\n      console.log(`amount: ${amount}`);\n      console.log(`token:${token.balanceOf(signerAddress)}`);\n      console.log(`nfttoken:${nfttoken}`);\n      resolve({\n        signerAddress,\n        token,\n        nfttoken,\n        amount\n      });\n    }\n\n    resolve({\n      signerAddress: undefined,\n      token: undefined,\n      nfttoken: undefined\n    });\n  });\n});\n\nexport default getTokenBlockchain;","map":{"version":3,"sources":["/home/marc/eattheblocks-master/screencast/379-nft-royalties/frontend/src/components/token.js"],"names":["ethers","Contract","web3","Token","nftToken","addresses","getAmount","address","amountWei","token","balanceOf","signerAddress","amount","parseInt","utils","fromWei","toBN","console","log","getTokenBlockchain","Promise","resolve","reject","window","addEventListener","ethereum","enable","provider","providers","Web3Provider","signer","getSigner","getAddress","abi","nfttoken","undefined"],"mappings":"AAAA,SAASA,MAAT,EAAiBC,QAAjB,QAAiC,QAAjC;AACA,OAAOC,IAAP,MAAiB,MAAjB;AACA,OAAOC,KAAP,MAAkB,6BAAlB;AACA,OAAOC,QAAP,MAAqB,uBAArB;AACA,OAAOC,SAAP,MAAsB,6BAAtB;;AAEA,MAAMC,SAAS,GAAG,MAAOC,OAAP,IAAmB;AACnC,QAAMC,SAAS,GAAG,MAAMC,KAAK,CAACC,SAAN,CAAgBC,aAAhB,CAAxB;AACA,QAAMC,MAAM,GAAGC,QAAQ,CAACX,IAAI,CAACY,KAAL,CAAWC,OAAX,CAAmBb,IAAI,CAACY,KAAL,CAAWE,IAAX,CAAgBR,SAAhB,CAAnB,CAAD,CAAvB;AACAS,EAAAA,OAAO,CAACC,GAAR,CAAa,WAAUN,MAAO,EAA9B;AACD,CAJD;;AAMA,MAAMO,kBAAkB,GAAG,MACzB,IAAIC,OAAJ,CAAY,CAACC,OAAD,EAAUC,MAAV,KAAqB;AAC/BC,EAAAA,MAAM,CAACC,gBAAP,CAAwB,MAAxB,EAAgC,YAAY;AAC1CP,IAAAA,OAAO,CAACC,GAAR,CAAa,oBAAmBK,MAAM,CAACE,QAAS,EAAhD;;AACA,QAAIF,MAAM,CAACE,QAAX,EAAqB;AACnB,YAAMF,MAAM,CAACE,QAAP,CAAgBC,MAAhB,EAAN;AACA,YAAMC,QAAQ,GAAG,IAAI3B,MAAM,CAAC4B,SAAP,CAAiBC,YAArB,CAAkCN,MAAM,CAACE,QAAzC,CAAjB;AACAR,MAAAA,OAAO,CAACC,GAAR,CAAa,aAAYS,QAAS,EAAlC;AACA,YAAMG,MAAM,GAAGH,QAAQ,CAACI,SAAT,EAAf;AACAd,MAAAA,OAAO,CAACC,GAAR,CAAa,UAASY,MAAO,EAA7B;AACA,YAAMnB,aAAa,GAAG,MAAMmB,MAAM,CAACE,UAAP,EAA5B;AACAf,MAAAA,OAAO,CAACC,GAAR,CAAa,iBAAgBP,aAAc,EAA3C;AAEA,YAAMF,KAAK,GAAG,IAAIR,QAAJ,CAAaE,KAAK,CAACI,OAAnB,EAA4BJ,KAAK,CAAC8B,GAAlC,EAAuCH,MAAvC,CAAd;AAEA,YAAMI,QAAQ,GAAG,IAAIjC,QAAJ,CAAaG,QAAQ,CAACG,OAAtB,EAA+BH,QAAQ,CAAC6B,GAAxC,EAA6CH,MAA7C,CAAjB;AAEA,YAAMtB,SAAS,GAAG,MAAMC,KAAK,CAACC,SAAN,CAAgBC,aAAhB,CAAxB;AACA,YAAMC,MAAM,GAAGC,QAAQ,CAACX,IAAI,CAACY,KAAL,CAAWC,OAAX,CAAmBb,IAAI,CAACY,KAAL,CAAWE,IAAX,CAAgBR,SAAhB,CAAnB,CAAD,CAAvB;AACAS,MAAAA,OAAO,CAACC,GAAR,CAAa,WAAUN,MAAO,EAA9B;AAEAK,MAAAA,OAAO,CAACC,GAAR,CAAa,SAAQT,KAAK,CAACC,SAAN,CAAgBC,aAAhB,CAA+B,EAApD;AACAM,MAAAA,OAAO,CAACC,GAAR,CAAa,YAAWgB,QAAS,EAAjC;AACAb,MAAAA,OAAO,CAAC;AAAEV,QAAAA,aAAF;AAAiBF,QAAAA,KAAjB;AAAwByB,QAAAA,QAAxB;AAAkCtB,QAAAA;AAAlC,OAAD,CAAP;AACD;;AACDS,IAAAA,OAAO,CAAC;AACNV,MAAAA,aAAa,EAAEwB,SADT;AAEN1B,MAAAA,KAAK,EAAE0B,SAFD;AAGND,MAAAA,QAAQ,EAAEC;AAHJ,KAAD,CAAP;AAKD,GA5BD;AA6BD,CA9BD,CADF;;AAiCA,eAAehB,kBAAf","sourcesContent":["import { ethers, Contract } from \"ethers\";\nimport web3 from \"web3\";\nimport Token from \"../contracts/MockToken.json\";\nimport nftToken from \"../contracts/NFT.json\";\nimport addresses from \"../contracts/addresses.json\";\n\nconst getAmount = async (address) => {\n  const amountWei = await token.balanceOf(signerAddress);\n  const amount = parseInt(web3.utils.fromWei(web3.utils.toBN(amountWei)));\n  console.log(`amount: ${amount}`);\n};\n\nconst getTokenBlockchain = () =>\n  new Promise((resolve, reject) => {\n    window.addEventListener(\"load\", async () => {\n      console.log(`window.ethereum: ${window.ethereum}`);\n      if (window.ethereum) {\n        await window.ethereum.enable();\n        const provider = new ethers.providers.Web3Provider(window.ethereum);\n        console.log(`provider: ${provider}`);\n        const signer = provider.getSigner();\n        console.log(`signer:${signer}`);\n        const signerAddress = await signer.getAddress();\n        console.log(`signerAddress:${signerAddress}`);\n\n        const token = new Contract(Token.address, Token.abi, signer);\n\n        const nfttoken = new Contract(nftToken.address, nftToken.abi, signer);\n\n        const amountWei = await token.balanceOf(signerAddress);\n        const amount = parseInt(web3.utils.fromWei(web3.utils.toBN(amountWei)));\n        console.log(`amount: ${amount}`);\n\n        console.log(`token:${token.balanceOf(signerAddress)}`);\n        console.log(`nfttoken:${nfttoken}`);\n        resolve({ signerAddress, token, nfttoken, amount });\n      }\n      resolve({\n        signerAddress: undefined,\n        token: undefined,\n        nfttoken: undefined,\n      });\n    });\n  });\n\nexport default getTokenBlockchain;\n"]},"metadata":{},"sourceType":"module"}
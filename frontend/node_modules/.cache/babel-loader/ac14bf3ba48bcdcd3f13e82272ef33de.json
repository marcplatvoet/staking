{"ast":null,"code":"var _s = $RefreshSig$();\n\nimport { ethers, Contract } from \"ethers\";\nimport { React, useState } from \"react\"; //import Web3 from \"web3\";\n\nimport MyToken from \"../contracts/MyToken.json\";\n\nconst getBalance = async (token, account) => {\n  const balance = await token.balanceOf(account);\n  return ethers.utils.formatEther(balance);\n};\n\nconst ConnectWallet = async () => {\n  _s();\n\n  console.log(\"Try Connect\");\n  const [currentchainid, setCurrentChainID] = useState(0);\n  const [currentaccount, setCurrentAccount] = useState(0);\n  const [islogged, setIsLogged] = useState(0);\n\n  try {\n    await window.ethereum.enable();\n    const id = await window.ethereum.request({\n      method: \"eth_chainId\"\n    });\n    setCurrentChainID(() => parseInt(id, 16));\n    const accounts = await window.ethereum.request({\n      method: \"eth_requestAccounts\"\n    });\n    setIsLogged(true);\n    setCurrentAccount(accounts[0]);\n    console.log(accounts);\n    return {\n      message: [],\n      currentaccount,\n      currentchainid,\n      islogged\n    };\n  } catch (err) {\n    if (err.code === 4001) {\n      // EIP-1193 userRejectedRequest error\n      // If this happens, the user rejected the connection request.\n      console.log(\"Please connect to MetaMask.\");\n      return [{\n        head: \"User Rejected Request\",\n        body: \"Please connect to MetaMask.\",\n        variant: \"info\"\n      }];\n    } else if (err.code === -32002) {\n      console.log(\"Please unlock MetaMask.\");\n      return [{\n        head: \"User Request Pending\",\n        body: \"Please unlock MetaMask and try agin.\",\n        variant: \"info\"\n      }];\n    } else {\n      console.error(err);\n      return [{\n        head: \"Error\",\n        body: err.message,\n        variant: \"info\"\n      }];\n    }\n  }\n};\n\n_s(ConnectWallet, \"MeS6JWoLt2OBZrz+iBy5KRA1qBI=\");\n\n_c = ConnectWallet;\n\nconst getTokenBlockchain = () => new Promise((resolve, reject) => {\n  window.addEventListener(\"load\", async () => {\n    console.log(`window.ethereum: ${window.ethereum}`);\n\n    if (window.ethereum) {\n      await window.ethereum.enable();\n      const provider = new ethers.providers.Web3Provider(window.ethereum); // console.log(`provider: ${provider}`);\n\n      const signer = provider.getSigner(); // console.log(`signer:${signer}`);\n\n      const signerAddress = await signer.getAddress(); // console.log(`signerAddress:${signerAddress}`);\n\n      const mytoken = new Contract(MyToken.address, MyToken.abi, signer); //const balance = getBalance(mytoken, signerAddress);\n\n      const balance = await mytoken.balanceOf(signerAddress); //console.log(balance);\n\n      console.log(ethers.utils.formatEther(balance)); //const contract = instance();\n\n      let artist = await mytoken._artist();\n      const percentage = ethers.utils.formatEther(await mytoken._percentage());\n      const admin = await mytoken.admin();\n\n      if (artist === \"0x0000000000000000000000000000000000000000\") {\n        artist = null;\n      }\n\n      console.log(artist);\n      console.log(percentage);\n      console.log(admin);\n      resolve({\n        signerAddress,\n        mytoken,\n        addresses: [artist, percentage, admin]\n      });\n    }\n\n    resolve({\n      signerAddress: undefined,\n      mytoken: undefined,\n      addresses: []\n    });\n  });\n});\n\nexport { getTokenBlockchain, getBalance, ConnectWallet };\n\nvar _c;\n\n$RefreshReg$(_c, \"ConnectWallet\");","map":{"version":3,"sources":["/home/marc/EatTheBlocks/nft-royalties/frontend/src/components/token.js"],"names":["ethers","Contract","React","useState","MyToken","getBalance","token","account","balance","balanceOf","utils","formatEther","ConnectWallet","console","log","currentchainid","setCurrentChainID","currentaccount","setCurrentAccount","islogged","setIsLogged","window","ethereum","enable","id","request","method","parseInt","accounts","message","err","code","head","body","variant","error","getTokenBlockchain","Promise","resolve","reject","addEventListener","provider","providers","Web3Provider","signer","getSigner","signerAddress","getAddress","mytoken","address","abi","artist","_artist","percentage","_percentage","admin","addresses","undefined"],"mappings":"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","sourcesContent":["import { ethers, Contract } from \"ethers\";\nimport { React, useState } from \"react\";\n//import Web3 from \"web3\";\nimport MyToken from \"../contracts/MyToken.json\";\n\nconst getBalance = async (token, account) => {\n  const balance = await token.balanceOf(account);\n  return ethers.utils.formatEther(balance);\n};\n\nconst ConnectWallet = async () => {\n  console.log(\"Try Connect\");\n  const [currentchainid, setCurrentChainID] = useState(0);\n  const [currentaccount, setCurrentAccount] = useState(0);\n  const [islogged, setIsLogged] = useState(0);\n  try {\n    await window.ethereum.enable();\n\n    const id = await window.ethereum.request({ method: \"eth_chainId\" });\n    setCurrentChainID(() => parseInt(id, 16));\n\n    const accounts = await window.ethereum.request({\n      method: \"eth_requestAccounts\",\n    });\n    setIsLogged(true);\n    setCurrentAccount(accounts[0]);\n\n    console.log(accounts);\n    return { message: [], currentaccount, currentchainid, islogged };\n  } catch (err) {\n    if (err.code === 4001) {\n      // EIP-1193 userRejectedRequest error\n      // If this happens, the user rejected the connection request.\n      console.log(\"Please connect to MetaMask.\");\n      return [\n        {\n          head: \"User Rejected Request\",\n          body: \"Please connect to MetaMask.\",\n          variant: \"info\",\n        },\n      ];\n    } else if (err.code === -32002) {\n      console.log(\"Please unlock MetaMask.\");\n      return [\n        {\n          head: \"User Request Pending\",\n          body: \"Please unlock MetaMask and try agin.\",\n          variant: \"info\",\n        },\n      ];\n    } else {\n      console.error(err);\n      return [{ head: \"Error\", body: err.message, variant: \"info\" }];\n    }\n  }\n};\n\nconst getTokenBlockchain = () =>\n  new Promise((resolve, reject) => {\n    window.addEventListener(\"load\", async () => {\n      console.log(`window.ethereum: ${window.ethereum}`);\n      if (window.ethereum) {\n        await window.ethereum.enable();\n        const provider = new ethers.providers.Web3Provider(window.ethereum);\n        // console.log(`provider: ${provider}`);\n        const signer = provider.getSigner();\n        // console.log(`signer:${signer}`);\n        const signerAddress = await signer.getAddress();\n        // console.log(`signerAddress:${signerAddress}`);\n        const mytoken = new Contract(MyToken.address, MyToken.abi, signer);\n        //const balance = getBalance(mytoken, signerAddress);\n        const balance = await mytoken.balanceOf(signerAddress);\n        //console.log(balance);\n        console.log(ethers.utils.formatEther(balance));\n\n        //const contract = instance();\n\n        let artist = await mytoken._artist();\n\n        const percentage = ethers.utils.formatEther(\n          await mytoken._percentage()\n        );\n\n        const admin = await mytoken.admin();\n\n        if (artist === \"0x0000000000000000000000000000000000000000\") {\n          artist = null;\n        }\n\n        console.log(artist);\n        console.log(percentage);\n        console.log(admin);\n\n        resolve({\n          signerAddress,\n          mytoken,\n          addresses: [artist, percentage, admin],\n        });\n      }\n      resolve({\n        signerAddress: undefined,\n        mytoken: undefined,\n        addresses: [],\n      });\n    });\n  });\n\nexport { getTokenBlockchain, getBalance, ConnectWallet };\n"]},"metadata":{},"sourceType":"module"}